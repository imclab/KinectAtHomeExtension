find_package(PkgConfig)

pkg_check_modules(PC_X264 x264)
find_path(X264_INCLUDE_DIR x264.h
	HINTS ${PC_X264_INCLUDEDIR} ${PC_X264_INCLUDE_DIRS}
	NO_DEFAULT_PATH)

if(${X264_INCLUDE_DIR} STREQUAL X264_INCLUDE_DIR-NOTFOUND)
	pkg_check_modules(PC_X264 libx264)
	find_path(X264_INCLUDE_DIR x264.h
		HINTS ${PC_X264_INCLUDEDIR} ${PC_X264_INCLUDE_DIRS}
		NO_DEFAULT_PATH)
endif()

find_library(X264_LIBRARIES x264
	HINTS ${PC_X264_LIBDIR} ${PC_X264_LIBRARY_DIR}
	NO_DEFAULT_PATH)
if(${X264_LIBRARIES} STREQUAL X264_LIBRARIES-NOTFOUND)
	find_library(X264_LIBRARIES libx264
		HINTS ${PC_X264_LIBDIR} ${PC_X264_LIBRARY_DIR}
		NO_DEFAULT_PATH)
endif()

if(NOT ${X264_INCLUDE_DIR} STREQUAL X264_INCLUDE_DIR-NOTFOUND
	AND NOT ${X264_LIBRARIES} STREQUAL X264_LIBRARIES-NOTFOUND)
	
	SET(X264_FOUND 1)
	SET(X264_INCLUDE_DIRS ${X264_INCLUDE_DIR})
	SET(X264_LIBS ${X264_LIBRARIES})
	
	message(STATUS "x264 found: ${X264_INCLUDE_DIRS} ${X264_LIBS}")
else()
	message(STATUS "Can't find x264")
endif()
