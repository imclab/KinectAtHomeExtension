FIND_PACKAGE(PkgConfig)

PKG_CHECK_MODULES(PC_X264 x264)
FIND_PATH(X264_INCLUDE_DIR x264.h
	HINTS ${PC_X264_INCLUDEDIR} ${PC_X264_INCLUDE_DIRS}
	)

IF(${X264_INCLUDE_DIR} STREQUAL X264_INCLUDE_DIR-NOTFOUND)
	PKG_CHECK_MODULES(PC_X264 libx264)
	FIND_PATH(X264_INCLUDE_DIR x264.h
		HINTS ${PC_X264_INCLUDEDIR} ${PC_X264_INCLUDE_DIRS}
		NO_DEFAULT_PATH)
ENDIF()

FIND_LIBRARY(X264_LIBRARIES x264
	HINTS ${PC_X264_LIBDIR} ${PC_X264_LIBRARY_DIR}
	NO_DEFAULT_PATH)
IF(${X264_LIBRARIES} STREQUAL X264_LIBRARIES-NOTFOUND)
	FIND_LIBRARY(X264_LIBRARIES libx264
		HINTS ${PC_X264_LIBDIR} ${PC_X264_LIBRARY_DIR}
		NO_DEFAULT_PATH)
ENDIF()

IF(NOT ${X264_INCLUDE_DIR} STREQUAL X264_INCLUDE_DIR-NOTFOUND
	AND NOT ${X264_LIBRARIES} STREQUAL X264_LIBRARIES-NOTFOUND)
	
	SET(X264_FOUND 1)
	SET(X264_INCLUDE_DIRS ${X264_INCLUDE_DIR})
	SET(X264_LIBS ${X264_LIBRARIES})
	
	MESSAGE(STATUS "x264 found: ${X264_INCLUDE_DIRS} ${X264_LIBS}")
ELSE()
	MESSAGE(STATUS "Can't find x264")
ENDIF()
